{% extends "base.html" %}

{% block content %}
  <!-- Add Task Form -->
  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <form action="{{ url_for('main.add') }}" method="post" class="row g-2">
        <div class="col-md-4">
          <input type="text" name="title" class="form-control" placeholder="Task title" required>
        </div>
        <div class="col-md-6">
          <input type="text" name="description" class="form-control" placeholder="Description">
        </div>
        <div class="col-md-2 d-grid">
          <button type="submit" class="btn btn-primary">➕ Add Task</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Task List -->
  <div class="list-group">
    {% for task in tasks %}
      <div class="list-group-item d-flex justify-content-between align-items-center shadow-sm mb-2 rounded">
        <div>
          <h5 class="mb-1 {% if task.status == 'Completed' %}text-decoration-line-through text-success{% endif %}">
            {{ task.title }}
          </h5>
          <small class="text-muted">{{ task.description }}</small>
          <span class="badge bg-{{ 'success' if task.status == 'Completed' else 'warning text-dark' }}">
            {{ task.status }}
          </span>
        </div>
        <div>
          <a href="{{ url_for('main.edit', id=task.id) }}" class="btn btn-sm btn-info">✏ Edit</a>
          <a href="{{ url_for('main.delete', id=task.id) }}" class="btn btn-sm btn-danger">🗑 Delete</a>
          {% if task.status == "Pending" %}
            <a href="{{ url_for('main.complete', id=task.id) }}" class="btn btn-sm btn-success">✅ Complete</a>
          {% else %}
            <a href="{{ url_for('main.pending', id=task.id) }}" class="btn btn-sm btn-warning">⏳ Pending</a>
          {% endif %}
        </div>
      </div>
    {% endfor %}
  </div>
{% endblock %}
